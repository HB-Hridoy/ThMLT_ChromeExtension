var fa=Object.create;var Sr=Object.defineProperty;var ha=Object.getOwnPropertyDescriptor;var da=Object.getOwnPropertyNames;var va=Object.getPrototypeOf,pa=Object.prototype.hasOwnProperty;var ya=(z,N)=>()=>(N||z((N={exports:{}}).exports,N),N.exports);var ma=(z,N,I,we)=>{if(N&&typeof N=="object"||typeof N=="function")for(let L of da(N))!pa.call(z,L)&&L!==I&&Sr(z,L,{get:()=>N[L],enumerable:!(we=ha(N,L))||we.enumerable});return z};var ga=(z,N,I)=>(I=z!=null?fa(va(z)):{},ma(N||!z||!z.__esModule?Sr(I,"default",{value:z,enumerable:!0}):I,z));var Ar=ya((Dn,On)=>{(function(z,N){typeof Dn=="object"&&typeof On<"u"?On.exports=N():typeof define=="function"&&define.amd?define(N):(z=typeof globalThis<"u"?globalThis:z||self,z.Dexie=N())})(Dn,function(){"use strict";var z=function(e,t){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},z(e,t)};function N(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");z(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var I=function(){return I=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},I.apply(this,arguments)};function we(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var L=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,U=Object.keys,V=Array.isArray;typeof Promise<"u"&&!L.Promise&&(L.Promise=Promise);function J(e,t){return typeof t!="object"||U(t).forEach(function(n){e[n]=t[n]}),e}var Ce=Object.getPrototypeOf,Or={}.hasOwnProperty;function X(e,t){return Or.call(e,t)}function Pe(e,t){typeof t=="function"&&(t=t(Ce(e))),(typeof Reflect>"u"?U:Reflect.ownKeys)(t).forEach(function(n){le(e,n,t[n])})}var Cn=Object.defineProperty;function le(e,t,n,r){Cn(e,t,J(n&&X(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Re(e){return{from:function(t){return e.prototype=Object.create(t.prototype),le(e.prototype,"constructor",e),{extend:Pe.bind(null,e.prototype)}}}}var Tr=Object.getOwnPropertyDescriptor;function Pn(e,t){var n=Tr(e,t),r;return n||(r=Ce(e))&&Pn(r,t)}var Ir=[].slice;function ut(e,t,n){return Ir.call(e,t,n)}function Rn(e,t){return t(e)}function Ye(e){if(!e)throw new Error("Assertion Failed")}function Bn(e){L.setImmediate?setImmediate(e):setTimeout(e,0)}function Cr(e,t){return e.reduce(function(n,r,i){var a=t(r,i);return a&&(n[a[0]]=a[1]),n},{})}function ue(e,t){if(typeof t=="string"&&X(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var a=ue(e,t[r]);n.push(a)}return n}var u=t.indexOf(".");if(u!==-1){var o=e[t.substr(0,u)];return o==null?void 0:ue(o,t.substr(u+1))}}function Z(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Ye(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)Z(e,t[r],n[r])}else{var a=t.indexOf(".");if(a!==-1){var u=t.substr(0,a),o=t.substr(a+1);if(o==="")n===void 0?V(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=n;else{var s=e[u];(!s||!X(e,u))&&(s=e[u]={}),Z(s,o,n)}}else n===void 0?V(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Pr(e,t){typeof t=="string"?Z(e,t,void 0):"length"in t&&[].map.call(t,function(n){Z(e,n,void 0)})}function Mn(e){var t={};for(var n in e)X(e,n)&&(t[n]=e[n]);return t}var Rr=[].concat;function Fn(e){return Rr.apply([],e)}var Br="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Fn([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return L[e]}),jn=new Set(Br.map(function(e){return L[e]}));function Nn(e){var t={};for(var n in e)if(X(e,n)){var r=e[n];t[n]=!r||typeof r!="object"||jn.has(r.constructor)?r:Nn(r)}return t}function Mr(e){for(var t in e)if(X(e,t))return!1;return!0}var Ue=null;function _e(e){Ue=new WeakMap;var t=Mt(e);return Ue=null,t}function Mt(e){if(!e||typeof e!="object")return e;var t=Ue.get(e);if(t)return t;if(V(e)){t=[],Ue.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Mt(e[n]))}else if(jn.has(e.constructor))t=e;else{var i=Ce(e);t=i===Object.prototype?{}:Object.create(i),Ue.set(e,t);for(var a in e)X(e,a)&&(t[a]=Mt(e[a]))}return t}var Fr={}.toString;function Ft(e){return Fr.call(e).slice(8,-1)}var jt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",jr=typeof jt=="symbol"?function(e){var t;return e!=null&&(t=e[jt])&&t.apply(e)}:function(){return null};function xe(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n>=0}var Be={};function oe(e){var t,n,r,i;if(arguments.length===1){if(V(e))return e.slice();if(this===Be&&typeof e=="string")return[e];if(i=jr(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Nt=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Nr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Ln=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Lt=Nr.concat(Ln),Lr={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Me(e,t){this.name=e,this.message=t}Re(Me).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Vn(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function ot(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Vn(e,t)}Re(ot).from(Me);function Fe(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Vn(e,this.failures)}Re(Fe).from(Me);var Vt=Lt.reduce(function(e,t){return e[t]=t+"Error",e},{}),Vr=Me,O=Lt.reduce(function(e,t){var n=t+"Error";function r(i,a){this.name=n,i?typeof i=="string"?(this.message="".concat(i).concat(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message="".concat(i.name," ").concat(i.message),this.inner=i):(this.message=Lr[t]||n,this.inner=null)}return Re(r).from(Vr),e[t]=r,e},{});O.Syntax=SyntaxError,O.Type=TypeError,O.Range=RangeError;var zn=Ln.reduce(function(e,t){return e[t+"Error"]=O[t],e},{});function zr(e,t){if(!e||e instanceof Me||e instanceof TypeError||e instanceof SyntaxError||!e.name||!zn[e.name])return e;var n=new zn[e.name](t||e.message,e);return"stack"in e&&le(n,"stack",{get:function(){return this.inner.stack}}),n}var st=Lt.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=O[t]),e},{});st.ModifyError=ot,st.DexieError=Me,st.BulkError=Fe;function F(){}function $e(e){return e}function Wr(e,t){return e==null||e===$e?t:function(n){return t(e(n))}}function Ee(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Yr(e,t){return e===F?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ee(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Ee(i,this.onerror):i),a!==void 0?a:n}}function Ur(e,t){return e===F?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ee(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ee(r,this.onerror):r)}}function $r(e,t){return e===F?t:function(n){var r=e.apply(this,arguments);J(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var u=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Ee(i,this.onsuccess):i),a&&(this.onerror=this.onerror?Ee(a,this.onerror):a),r===void 0?u===void 0?void 0:u:J(r,u)}}function Qr(e,t){return e===F?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function zt(e,t){return e===F?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}var ne=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Wn(e,t){ne=e}var Qe={},Yn=100,Wt=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,Ce(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Ce(t),e]}(),Un=Wt[0],$n=Wt[1],Hr=Wt[2],Xr=$n&&$n.then,Ke=Un&&Un.constructor,Yt=!!Hr;function Gr(){queueMicrotask(Zr)}var He=function(e,t){Xe.push([e,t]),ct&&(Gr(),ct=!1)},Ut=!0,ct=!0,Se=[],lt=[],$t=$e,fe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:F,pgp:!1,env:{},finalize:F},k=fe,Xe=[],Ae=0,ft=[];function K(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=k;if(typeof e!="function"){if(e!==Qe)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Ht(this,this._value);return}this._state=null,this._value=null,++t.ref,Hn(this,e)}var Qt={get:function(){var e=k,t=pt;function n(r,i){var a=this,u=!e.global&&(e!==k||t!==pt),o=u&&!de(),s=new K(function(c,h){Xt(a,new Qn(Jn(r,e,u,o),Jn(i,e,u,o),c,h,e))});return this._consoleTask&&(s._consoleTask=this._consoleTask),s}return n.prototype=Qe,n},set:function(e){le(this,"then",e&&e.prototype===Qe?Qt:{get:function(){return e},set:Qt.set})}};Pe(K.prototype,{then:Qt,_then:function(e,t){Xt(this,new Qn(null,null,e,t,k))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):ht(r)}):this.then(null,function(r){return r&&r.name===t?n(r):ht(r)})},finally:function(e){return this.then(function(t){return K.resolve(e()).then(function(){return t})},function(t){return K.resolve(e()).then(function(){return ht(t)})})},timeout:function(e,t){var n=this;return e<1/0?new K(function(r,i){var a=setTimeout(function(){return i(new O.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&le(K.prototype,Symbol.toStringTag,"Dexie.Promise"),fe.env=Gn();function Qn(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}Pe(K,{all:function(){var e=oe.apply(null,arguments).map(yt);return new K(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,a){return K.resolve(i).then(function(u){e[a]=u,--r||t(e)},n)})})},resolve:function(e){if(e instanceof K)return e;if(e&&typeof e.then=="function")return new K(function(n,r){e.then(n,r)});var t=new K(Qe,!0,e);return t},reject:ht,race:function(){var e=oe.apply(null,arguments).map(yt);return new K(function(t,n){e.map(function(r){return K.resolve(r).then(t,n)})})},PSD:{get:function(){return k},set:function(e){return k=e}},totalEchoes:{get:function(){return pt}},newPSD:he,usePSD:ke,scheduler:{get:function(){return He},set:function(e){He=e}},rejectionMapper:{get:function(){return $t},set:function(e){$t=e}},follow:function(e,t){return new K(function(n,r){return he(function(i,a){var u=k;u.unhandleds=[],u.onunhandled=a,u.finalize=Ee(function(){var o=this;qr(function(){o.unhandleds.length===0?i():a(o.unhandleds[0])})},u.finalize),e()},t,n,r)})}}),Ke&&(Ke.allSettled&&le(K,"allSettled",function(){var e=oe.apply(null,arguments).map(yt);return new K(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,a){return K.resolve(i).then(function(u){return r[a]={status:"fulfilled",value:u}},function(u){return r[a]={status:"rejected",reason:u}}).then(function(){return--n||t(r)})})})}),Ke.any&&typeof AggregateError<"u"&&le(K,"any",function(){var e=oe.apply(null,arguments).map(yt);return new K(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(a,u){return K.resolve(a).then(function(o){return t(o)},function(o){i[u]=o,--r||n(new AggregateError(i))})})})}),Ke.withResolvers&&(K.withResolvers=Ke.withResolvers));function Hn(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&je();n&&typeof n.then=="function"?Hn(e,function(i,a){n instanceof K?n._then(i,a):n.then(i,a)}):(e._state=!0,e._value=n,Xn(e)),r&&Ne()}},Ht.bind(null,e))}catch(n){Ht(e,n)}}function Ht(e,t){if(lt.push(t),e._state===null){var n=e._lib&&je();t=$t(t),e._state=!1,e._value=t,ei(e),Xn(e),n&&Ne()}}function Xn(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Xt(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Ae===0&&(++Ae,He(function(){--Ae===0&&Gt()},[]))}function Xt(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ae,He(Jr,[n,e,t])}function Jr(e,t,n){try{var r,i=t._value;!t._state&&lt.length&&(lt=[]),r=ne&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),!t._state&&lt.indexOf(i)===-1&&ti(t),n.resolve(r)}catch(a){n.reject(a)}finally{--Ae===0&&Gt(),--n.psd.ref||n.psd.finalize()}}function Zr(){ke(fe,function(){je()&&Ne()})}function je(){var e=Ut;return Ut=!1,ct=!1,e}function Ne(){var e,t,n;do for(;Xe.length>0;)for(e=Xe,Xe=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Xe.length>0);Ut=!0,ct=!0}function Gt(){var e=Se;Se=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=ft.slice(0),n=t.length;n;)t[--n]()}function qr(e){function t(){e(),ft.splice(ft.indexOf(t),1)}ft.push(t),++Ae,He(function(){--Ae===0&&Gt()},[])}function ei(e){Se.some(function(t){return t._value===e._value})||Se.push(e)}function ti(e){for(var t=Se.length;t;)if(Se[--t]._value===e._value){Se.splice(t,1);return}}function ht(e){return new K(Qe,!1,e)}function j(e,t){var n=k;return function(){var r=je(),i=k;try{return ve(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{ve(i,!1),r&&Ne()}}}var $={awaits:0,echoes:0,id:0},ni=0,dt=[],vt=0,pt=0,ri=0;function he(e,t,n,r){var i=k,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++ri,fe.env,a.env=Yt?{Promise:K,PromiseProp:{value:K,configurable:!0,writable:!0},all:K.all,race:K.race,allSettled:K.allSettled,any:K.any,resolve:K.resolve,reject:K.reject}:{},t&&J(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=ke(a,e,n,r);return a.ref===0&&a.finalize(),u}function Le(){return $.id||($.id=++ni),++$.awaits,$.echoes+=Yn,$.id}function de(){return $.awaits?(--$.awaits===0&&($.id=0),$.echoes=$.awaits*Yn,!0):!1}(""+Xr).indexOf("[native code]")===-1&&(Le=de=F);function yt(e){return $.echoes&&e&&e.constructor===Ke?(Le(),e.then(function(t){return de(),t},function(t){return de(),Y(t)})):e}function ii(e){++pt,(!$.echoes||--$.echoes===0)&&($.echoes=$.awaits=$.id=0),dt.push(k),ve(e,!0)}function ai(){var e=dt[dt.length-1];dt.pop(),ve(e,!1)}function ve(e,t){var n=k;if((t?$.echoes&&(!vt++||e!==k):vt&&(!--vt||e!==k))&&queueMicrotask(t?ii.bind(null,e):ai),e!==k&&(k=e,n===fe&&(fe.env=Gn()),Yt)){var r=fe.env.Promise,i=e.env;(n.global||e.global)&&(Object.defineProperty(L,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Gn(){var e=L.Promise;return Yt?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(L,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function ke(e,t,n,r,i){var a=k;try{return ve(e,!0),t(n,r,i)}finally{ve(a,!1)}}function Jn(e,t,n,r){return typeof e!="function"?e:function(){var i=k;n&&Le(),ve(t,!0);try{return e.apply(this,arguments)}finally{ve(i,!1),r&&queueMicrotask(de)}}}function Jt(e){Promise===Ke&&$.echoes===0?vt===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}var Y=K.reject;function Zt(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!k.letThrough&&!e._vip){if(e._state.openComplete)return Y(new O.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return Y(new O.DatabaseClosed);e.open().catch(F)}return e._state.dbReadyPromise.then(function(){return Zt(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(a){return a.name===Vt.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return Zt(e,t,n,r)})):Y(a)}return i._promise(t,function(a,u){return he(function(){return k.trans=i,r(a,u,i)})}).then(function(a){if(t==="readwrite")try{i.idbtrans.commit()}catch{}return t==="readonly"?a:i._completion.then(function(){return a})})}}var Zn="4.0.11",De="\uFFFF",qt=-1/0,se="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",qn="String expected.",Ve=[],mt="__dbnames",en="readonly",tn="readwrite";function Oe(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var er={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function gt(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=_e(t),delete t[e]),t}:function(t){return t}}function tr(){throw O.Type()}function B(e,t){try{var n=nr(e),r=nr(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return oi(rr(e),rr(t));case"Array":return ui(e,t)}}catch{}return NaN}function ui(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a){var u=B(e[a],t[a]);if(u!==0)return u}return n===r?0:n<r?-1:1}function oi(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}function nr(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=Ft(e);return n==="ArrayBuffer"?"binary":n}function rr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var ir=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||k.trans,a=this.name,u=ne&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function o(h,l,p){if(!p.schema[a])throw new O.NotFound("Table "+a+" not part of transaction");return n(p.idbtrans,p)}var s=je();try{var c=i&&i.db._novip===this.db._novip?i===k.trans?i._promise(t,o,r):he(function(){return i._promise(t,o,r)},{trans:i,transless:k.transless||k}):Zt(this.db,t,[this.name],o);return u&&(c._consoleTask=u,c=c.catch(function(h){return console.trace(h),Y(h)})),c}finally{s&&Ne()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):t==null?Y(new O.Type("Invalid argument to Table.get()")):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(a){return r.hook.reading.fire(a)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(V(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var n=U(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(h){if(h.compound&&n.every(function(p){return h.keyPath.indexOf(p)>=0})){for(var l=0;l<n.length;++l)if(n.indexOf(h.keyPath[l])===-1)return!1;return!0}return!1}).sort(function(h,l){return h.keyPath.length-l.keyPath.length})[0];if(r&&this.db._maxKey!==De){var i=r.keyPath.slice(0,n.length);return this.where(i).equals(i.map(function(h){return t[h]}))}!r&&ne&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(n.join("+"),"]"));var a=this.schema.idxByName;function u(h,l){return B(h,l)===0}var o=n.reduce(function(h,l){var p=h[0],_=h[1],f=a[l],d=t[l];return[p||f,p||!f?Oe(_,f&&f.multi?function(v){var b=ue(v,l);return V(b)&&b.some(function(m){return u(d,m)})}:function(v){return u(d,ue(v,l))}):_]},[null,null]),s=o[0],c=o[1];return s?this.where(s.name).equals(t[s.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,V(t)?"[".concat(t.join("+"),"]"):t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){var n=this,r=n.db,i=n.name;this.schema.mappedClass=t,t.prototype instanceof tr&&(t=function(s){N(c,s);function c(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(c.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),c.prototype.table=function(){return i},c}(t));for(var a=new Set,u=t.prototype;u;u=Ce(u))Object.getOwnPropertyNames(u).forEach(function(s){return a.add(s)});var o=function(s){if(!s)return s;var c=Object.create(t.prototype);for(var h in s)if(!a.has(h))try{c[h]=s[h]}catch{}return c};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=o,this.hook("reading",o),t},e.prototype.defineClass=function(){function t(n){J(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,u=i.keyPath,o=t;return u&&a&&(o=gt(u)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[o]})}).then(function(s){return s.numFailures?K.reject(s.failures[0]):s.lastResult}).then(function(s){if(u)try{Z(t,u,s)}catch{}return s})},e.prototype.update=function(t,n){if(typeof t=="object"&&!V(t)){var r=ue(t,this.schema.primKey.keyPath);return r===void 0?Y(new O.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,u=i.keyPath,o=t;return u&&a&&(o=gt(u)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"put",values:[o],keys:n!=null?[n]:null})}).then(function(s){return s.numFailures?K.reject(s.failures[0]):s.lastResult}).then(function(s){if(u)try{Z(t,u,s)}catch{}return s})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?K.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:er})}).then(function(n){return n.numFailures?K.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(a){return n.hook.reading.fire(a)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var u=r?r.allKeys:void 0;return this._trans("readwrite",function(o){var s=i.schema.primKey,c=s.auto,h=s.keyPath;if(h&&a)throw new O.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new O.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,p=h&&c?t.map(gt(h)):t;return i.core.mutate({trans:o,type:"add",keys:a,values:p,wantResults:u}).then(function(_){var f=_.numFailures,d=_.results,v=_.lastResult,b=_.failures,m=u?d:v;if(f===0)return m;throw new Fe("".concat(i.name,".bulkAdd(): ").concat(f," of ").concat(l," operations failed"),b)})})},e.prototype.bulkPut=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var u=r?r.allKeys:void 0;return this._trans("readwrite",function(o){var s=i.schema.primKey,c=s.auto,h=s.keyPath;if(h&&a)throw new O.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new O.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,p=h&&c?t.map(gt(h)):t;return i.core.mutate({trans:o,type:"put",keys:a,values:p,wantResults:u}).then(function(_){var f=_.numFailures,d=_.results,v=_.lastResult,b=_.failures,m=u?d:v;if(f===0)return m;throw new Fe("".concat(i.name,".bulkPut(): ").concat(f," of ").concat(l," operations failed"),b)})})},e.prototype.bulkUpdate=function(t){var n=this,r=this.core,i=t.map(function(o){return o.key}),a=t.map(function(o){return o.changes}),u=[];return this._trans("readwrite",function(o){return r.getMany({trans:o,keys:i,cache:"clone"}).then(function(s){var c=[],h=[];t.forEach(function(p,_){var f=p.key,d=p.changes,v=s[_];if(v){for(var b=0,m=Object.keys(d);b<m.length;b++){var g=m[b],w=d[g];if(g===n.schema.primKey.keyPath){if(B(w,f)!==0)throw new O.Constraint("Cannot update primary key in bulkUpdate()")}else Z(v,g,w)}u.push(_),c.push(f),h.push(v)}});var l=c.length;return r.mutate({trans:o,type:"put",keys:c,values:h,updates:{keys:i,changeSpecs:a}}).then(function(p){var _=p.numFailures,f=p.failures;if(_===0)return l;for(var d=0,v=Object.keys(f);d<v.length;d++){var b=v[d],m=u[Number(b)];if(m!=null){var g=f[b];delete f[b],f[m]=g}}throw new Fe("".concat(n.name,".bulkUpdate(): ").concat(_," of ").concat(l," operations failed"),f)})})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var a=i.numFailures,u=i.lastResult,o=i.failures;if(a===0)return u;throw new Fe("".concat(n.name,".bulkDelete(): ").concat(a," of ").concat(r," operations failed"),o)})},e}();function Ge(e){var t={},n=function(o,s){if(s){for(var c=arguments.length,h=new Array(c-1);--c;)h[c-1]=arguments[c];return t[o].subscribe.apply(null,h),e}else if(typeof o=="string")return t[o]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(o,s,c){if(typeof o=="object")return u(o);s||(s=Qr),c||(c=F);var h={subscribers:[],fire:c,subscribe:function(l){h.subscribers.indexOf(l)===-1&&(h.subscribers.push(l),h.fire=s(h.fire,l))},unsubscribe:function(l){h.subscribers=h.subscribers.filter(function(p){return p!==l}),h.fire=h.subscribers.reduce(s,c)}};return t[o]=n[o]=h,h}function u(o){U(o).forEach(function(s){var c=o[s];if(V(c))a(s,o[s][0],o[s][1]);else if(c==="asap")var h=a(s,$e,function(){for(var p=arguments.length,_=new Array(p);p--;)_[p]=arguments[p];h.subscribers.forEach(function(f){Bn(function(){f.apply(null,_)})})});else throw new O.InvalidArgument("Invalid event config")})}}function Je(e,t){return Re(t).from({prototype:e}),t}function si(e){return Je(ir.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:Ge(null,{creating:[Yr,F],reading:[Wr,$e],updating:[$r,F],deleting:[Ur,F]})})}function ze(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function nn(e,t){e.filter=Oe(e.filter,t)}function rn(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Oe(r(),t())}:t,e.justLimit=n&&!r}function ci(e,t){e.isMatch=Oe(e.isMatch,t)}function bt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new O.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function ar(e,t,n){var r=bt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function wt(e,t,n,r){var i=e.replayFilter?Oe(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},u=function(o,s,c){if(!i||i(s,c,function(p){return s.stop(p)},function(p){return s.fail(p)})){var h=s.primaryKey,l=""+h;l==="[object ArrayBuffer]"&&(l=""+new Uint8Array(h)),X(a,l)||(a[l]=!0,t(o,s,c))}};return Promise.all([e.or._iterate(u,n),ur(ar(e,r,n),e.algorithm,u,!e.keysOnly&&e.valueMapper)])}else return ur(ar(e,r,n),Oe(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function ur(e,t,n,r){var i=r?function(u,o,s){return n(r(u),o,s)}:n,a=j(i);return e.then(function(u){if(u)return u.start(function(){var o=function(){return u.continue()};(!t||t(u,function(s){return o=s},function(s){u.stop(s),o=F},function(s){u.fail(s),o=F}))&&a(u.value,u,function(s){return o=s}),o()})})}var Ze=function(){function e(t){this["@@propmod"]=t}return e.prototype.execute=function(t){var n,r=this["@@propmod"];if(r.add!==void 0){var i=r.add;if(V(i))return we(we([],V(t)?t:[],!0),i,!0).sort();if(typeof i=="number")return(Number(t)||0)+i;if(typeof i=="bigint")try{return BigInt(t)+i}catch{return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(r.remove!==void 0){var a=r.remove;if(V(a))return V(t)?t.filter(function(o){return!a.includes(o)}).sort():[];if(typeof a=="number")return Number(t)-a;if(typeof a=="bigint")try{return BigInt(t)-a}catch{return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}var u=(n=r.replacePrefix)===null||n===void 0?void 0:n[0];return u&&typeof t=="string"&&t.startsWith(u)?r.replacePrefix[1]+t.substring(u.length):t},e}(),li=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,Y.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,Y.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Oe(n.algorithm,t)},e.prototype._iterate=function(t,n){return wt(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&J(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return wt(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,a=i.table.core;if(ze(i,!0))return a.count({trans:r,query:{index:bt(i,a.schema),range:i.range}}).then(function(o){return Math.min(o,i.limit)});var u=0;return wt(i,function(){return++u,!1},r,a).then(function(){return u})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],a=r.length-1;function u(c,h){return h?u(c[r[h]],h-1):c[i]}var o=this._ctx.dir==="next"?1:-1;function s(c,h){var l=u(c,a),p=u(h,a);return B(l,p)*o}return this.toArray(function(c){return c.sort(s)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&ze(i,!0)&&i.limit>0){var a=i.valueMapper,u=bt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:u,range:i.range}}).then(function(s){var c=s.result;return a?c.map(a):c})}else{var o=[];return wt(i,function(s){return o.push(s)},r,i.table.core).then(function(){return o})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,ze(n)?rn(n,function(){var r=t;return function(i,a){return r===0?!0:r===1?(--r,!1):(a(function(){i.advance(r),r=0}),!1)}}):rn(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),rn(this._ctx,function(){var n=t;return function(r,i,a){return--n<=0&&i(a),n>=0}},!0),this},e.prototype.until=function(t,n){return nn(this._ctx,function(r,i,a){return t(r.value)?(i(a),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return nn(this._ctx,function(n){return t(n.value)}),ci(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&ze(n,!0)&&n.limit>0)return this._read(function(i){var a=bt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(function(i){var a=i.result;return a}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return nn(this._ctx,function(i){var a=i.primaryKey.toString(),u=X(r,a);return r[a]=!0,!u}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var a;if(typeof t=="function")a=t;else{var u=U(t),o=u.length;a=function(m){for(var g=!1,w=0;w<o;++w){var y=u[w],x=t[y],S=ue(m,y);x instanceof Ze?(Z(m,y,x.execute(S)),g=!0):S!==x&&(Z(m,y,x),g=!0)}return g}}var s=r.table.core,c=s.schema.primaryKey,h=c.outbound,l=c.extractKey,p=200,_=n.db._options.modifyChunkSize;_&&(typeof _=="object"?p=_[s.name]||_["*"]||200:p=_);var f=[],d=0,v=[],b=function(m,g){var w=g.failures,y=g.numFailures;d+=m-y;for(var x=0,S=U(w);x<S.length;x++){var E=S[x];f.push(w[E])}};return n.clone().primaryKeys().then(function(m){var g=ze(r)&&r.limit===1/0&&(typeof t!="function"||t===an)&&{index:r.index,range:r.range},w=function(y){var x=Math.min(p,m.length-y);return s.getMany({trans:i,keys:m.slice(y,y+x),cache:"immutable"}).then(function(S){for(var E=[],T=[],R=h?[]:null,A=[],P=0;P<x;++P){var C=S[P],M={value:_e(C),primKey:m[y+P]};a.call(M,M.value,M)!==!1&&(M.value==null?A.push(m[y+P]):!h&&B(l(C),l(M.value))!==0?(A.push(m[y+P]),E.push(M.value)):(T.push(M.value),h&&R.push(m[y+P])))}return Promise.resolve(E.length>0&&s.mutate({trans:i,type:"add",values:E}).then(function(D){for(var W in D.failures)A.splice(parseInt(W),1);b(E.length,D)})).then(function(){return(T.length>0||g&&typeof t=="object")&&s.mutate({trans:i,type:"put",keys:R,values:T,criteria:g,changeSpec:typeof t!="function"&&t,isAdditionalChunk:y>0}).then(function(D){return b(T.length,D)})}).then(function(){return(A.length>0||g&&t===an)&&s.mutate({trans:i,type:"delete",keys:A,criteria:g,isAdditionalChunk:y>0}).then(function(D){return b(A.length,D)})}).then(function(){return m.length>y+x&&w(y+p)})})};return w(0).then(function(){if(f.length>0)throw new ot("Error modifying one or more objects",f,d,v);return m.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return ze(t)&&(t.isPrimKey||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,a=n;return t.table.core.count({trans:r,query:{index:i,range:a}}).then(function(u){return t.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(o){var s=o.failures;o.lastResult,o.results;var c=o.numFailures;if(c)throw new ot("Could not delete some values",Object.keys(s).map(function(h){return s[h]}),u-c);return u-c})})}):this.modify(an)},e}(),an=function(e,t){return t.value=null};function fi(e){return Je(li.prototype,function(n,r){this.db=e;var i=er,a=null;if(r)try{i=r()}catch(c){a=c}var u=n._ctx,o=u.table,s=o.hook.reading.fire;this._ctx={table:o,index:u.index,isPrimKey:!u.index||o.schema.primKey.keyPath&&u.index===o.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:a,or:u.or,valueMapper:s!==$e?s:null}})}function hi(e,t){return e<t?-1:e===t?0:1}function di(e,t){return e>t?-1:e===t?0:1}function q(e,t,n){var r=e instanceof sr?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function We(e){return new e.Collection(e,function(){return or("")}).limit(0)}function vi(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function pi(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function yi(e,t,n,r,i,a){for(var u=Math.min(e.length,r.length),o=-1,s=0;s<u;++s){var c=t[s];if(c!==r[s])return i(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):o>=0?e.substr(0,o)+t[o]+n.substr(o+1):null;i(e[s],c)<0&&(o=s)}return u<r.length&&a==="next"?e+n.substr(e.length):u<e.length&&a==="prev"?e.substr(0,n.length):o<0?null:e.substr(0,o)+r[o]+n.substr(o+1)}function _t(e,t,n,r){var i,a,u,o,s,c,h,l=n.length;if(!n.every(function(d){return typeof d=="string"}))return q(e,qn);function p(d){i=vi(d),a=pi(d),u=d==="next"?hi:di;var v=n.map(function(b){return{lower:a(b),upper:i(b)}}).sort(function(b,m){return u(b.lower,m.lower)});o=v.map(function(b){return b.upper}),s=v.map(function(b){return b.lower}),c=d,h=d==="next"?"":r}p("next");var _=new e.Collection(e,function(){return pe(o[0],s[l-1]+r)});_._ondirectionchange=function(d){p(d)};var f=0;return _._addAlgorithm(function(d,v,b){var m=d.key;if(typeof m!="string")return!1;var g=a(m);if(t(g,s,f))return!0;for(var w=null,y=f;y<l;++y){var x=yi(m,g,o[y],s[y],u,c);x===null&&w===null?f=y+1:(w===null||u(w,x)>0)&&(w=x)}return v(w!==null?function(){d.continue(w+h)}:b),!1}),_}function pe(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function or(e){return{type:1,lower:e,upper:e}}var sr=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?We(this):new this.Collection(this,function(){return pe(t,n,!r,!i)})}catch{return q(this,se)}},e.prototype.equals=function(t){return t==null?q(this,se):new this.Collection(this,function(){return or(t)})},e.prototype.above=function(t){return t==null?q(this,se):new this.Collection(this,function(){return pe(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?q(this,se):new this.Collection(this,function(){return pe(t,void 0,!1)})},e.prototype.below=function(t){return t==null?q(this,se):new this.Collection(this,function(){return pe(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?q(this,se):new this.Collection(this,function(){return pe(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?q(this,qn):this.between(t,t+De,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):_t(this,function(n,r){return n.indexOf(r[0])===0},[t],De)},e.prototype.equalsIgnoreCase=function(t){return _t(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=oe.apply(Be,arguments);return t.length===0?We(this):_t(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=oe.apply(Be,arguments);return t.length===0?We(this):_t(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,De)},e.prototype.anyOf=function(){var t=this,n=oe.apply(Be,arguments),r=this._cmp;try{n.sort(r)}catch{return q(this,se)}if(n.length===0)return We(this);var i=new this.Collection(this,function(){return pe(n[0],n[n.length-1])});i._ondirectionchange=function(u){r=u==="next"?t._ascending:t._descending,n.sort(r)};var a=0;return i._addAlgorithm(function(u,o,s){for(var c=u.key;r(c,n[a])>0;)if(++a,a===n.length)return o(s),!1;return r(c,n[a])===0?!0:(o(function(){u.continue(n[a])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[qt,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=oe.apply(Be,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return q(this,se)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[qt,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,a=this._ascending,u=this._descending,o=this._min,s=this._max;if(t.length===0)return We(this);if(!t.every(function(y){return y[0]!==void 0&&y[1]!==void 0&&a(y[0],y[1])<=0}))return q(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",O.InvalidArgument);var c=!n||n.includeLowers!==!1,h=n&&n.includeUppers===!0;function l(y,x){for(var S=0,E=y.length;S<E;++S){var T=y[S];if(i(x[0],T[1])<0&&i(x[1],T[0])>0){T[0]=o(T[0],x[0]),T[1]=s(T[1],x[1]);break}}return S===E&&y.push(x),y}var p=a;function _(y,x){return p(y[0],x[0])}var f;try{f=t.reduce(l,[]),f.sort(_)}catch{return q(this,se)}var d=0,v=h?function(y){return a(y,f[d][1])>0}:function(y){return a(y,f[d][1])>=0},b=c?function(y){return u(y,f[d][0])>0}:function(y){return u(y,f[d][0])>=0};function m(y){return!v(y)&&!b(y)}var g=v,w=new this.Collection(this,function(){return pe(f[0][0],f[f.length-1][1],!c,!h)});return w._ondirectionchange=function(y){y==="next"?(g=v,p=a):(g=b,p=u),f.sort(_)},w._addAlgorithm(function(y,x,S){for(var E=y.key;g(E);)if(++d,d===f.length)return x(S),!1;return m(E)?!0:(r._cmp(E,f[d][1])===0||r._cmp(E,f[d][0])===0||x(function(){p===a?y.continue(f[d][0]):y.continue(f[d][1])}),!1)}),w},e.prototype.startsWithAnyOf=function(){var t=oe.apply(Be,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?We(this):this.inAnyRange(t.map(function(n){return[n,n+De]})):q(this,"startsWithAnyOf() only works with strings")},e}();function mi(e){return Je(sr.prototype,function(n,r,i){if(this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i},this._cmp=this._ascending=B,this._descending=function(a,u){return B(u,a)},this._max=function(a,u){return B(a,u)>0?a:u},this._min=function(a,u){return B(a,u)<0?a:u},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new O.MissingAPI})}function re(e){return j(function(t){return qe(t),e(t.target.error),!1})}function qe(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var et="storagemutated",un="x-storagemutated-1",ye=Ge(null,et),gi=function(){function e(){}return e.prototype._lock=function(){return Ye(!k.global),++this._reculock,this._reculock===1&&!k.global&&(k.lockOwnerFor=this),this},e.prototype._unlock=function(){if(Ye(!k.global),--this._reculock===0)for(k.global||(k.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{ke(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&k.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(Ye(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new O.DatabaseClosed(i);case"MissingAPIError":throw new O.MissingAPI(i.message,i);default:throw new O.OpenFailed(i)}if(!this.active)throw new O.TransactionInactive;return Ye(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=j(function(a){qe(a),n._reject(t.error)}),t.onabort=j(function(a){qe(a),n.active&&n._reject(new O.Abort(t.error)),n.active=!1,n.on("abort").fire(a)}),t.oncomplete=j(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&ye.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return Y(new O.ReadOnly("Transaction is readonly"));if(!this.active)return Y(new O.TransactionInactive);if(this._locked())return new K(function(u,o){i._blockedFuncs.push([function(){i._promise(t,n,r).then(u,o)},k])});if(r)return he(function(){var u=new K(function(o,s){i._lock();var c=n(o,s,i);c&&c.then&&c.then(o,s)});return u.finally(function(){return i._unlock()}),u._lib=!0,u});var a=new K(function(u,o){var s=n(u,o,i);s&&s.then&&s.then(u,o)});return a._lib=!0,a},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=K.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function u(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=u)})()}var a=n._waitingFor;return new K(function(u,o){r.then(function(s){return n._waitingQueue.push(j(u.bind(null,s)))},function(s){return n._waitingQueue.push(j(o.bind(null,s)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new O.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(X(n,t))return n[t];var r=this.schema[t];if(!r)throw new O.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function bi(e){return Je(gi.prototype,function(n,r,i,a,u){var o=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=Ge(this,"complete","error","abort"),this.parent=u||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new K(function(s,c){o._resolve=s,o._reject=c}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(s){var c=o.active;return o.active=!1,o.on.error.fire(s),o.parent?o.parent._reject(s):c&&o.idbtrans&&o.idbtrans.abort(),Y(s)})})}function on(e,t,n,r,i,a,u){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!u?"&":"")+(r?"*":"")+(i?"++":"")+cr(t)}}function cr(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function sn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Cr(n,function(r){return[r.name,r]})}}function wi(e){return e.length===1?e[0]:e}var tt=function(e){try{return e.only([[]]),tt=function(){return[[]]},[[]]}catch{return tt=function(){return De},De}};function cn(e){return e==null?function(){}:typeof e=="string"?_i(e):function(t){return ue(t,e)}}function _i(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return ue(n,e)}}function lr(e){return[].slice.call(e)}var xi=0;function nt(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Ei(e,t,n){function r(l,p){var _=lr(l.objectStoreNames);return{schema:{name:l.name,tables:_.map(function(f){return p.objectStore(f)}).map(function(f){var d=f.keyPath,v=f.autoIncrement,b=V(d),m=d==null,g={},w={name:f.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:m,compound:b,keyPath:d,autoIncrement:v,unique:!0,extractKey:cn(d)},indexes:lr(f.indexNames).map(function(y){return f.index(y)}).map(function(y){var x=y.name,S=y.unique,E=y.multiEntry,T=y.keyPath,R=V(T),A={name:x,compound:R,keyPath:T,unique:S,multiEntry:E,extractKey:cn(T)};return g[nt(T)]=A,A}),getIndexByKeyPath:function(y){return g[nt(y)]}};return g[":id"]=w.primaryKey,d!=null&&(g[nt(d)]=w.primaryKey),w})},hasGetAll:_.length>0&&"getAll"in p.objectStore(_[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var p=l.lower,_=l.upper,f=l.lowerOpen,d=l.upperOpen,v=p===void 0?_===void 0?null:t.upperBound(_,!!d):_===void 0?t.lowerBound(p,!!f):t.bound(p,_,!!f,!!d);return v}function a(l){var p=l.name;function _(v){var b=v.trans,m=v.type,g=v.keys,w=v.values,y=v.range;return new Promise(function(x,S){x=j(x);var E=b.objectStore(p),T=E.keyPath==null,R=m==="put"||m==="add";if(!R&&m!=="delete"&&m!=="deleteRange")throw new Error("Invalid operation type: "+m);var A=(g||w||{length:1}).length;if(g&&w&&g.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(A===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});var P,C=[],M=[],D=0,W=function(ae){++D,qe(ae)};if(m==="deleteRange"){if(y.type===4)return x({numFailures:D,failures:M,results:[],lastResult:void 0});y.type===3?C.push(P=E.clear()):C.push(P=E.delete(i(y)))}else{var H=R?T?[w,g]:[w,null]:[g,null],ie=H[0],G=H[1];if(R)for(var ee=0;ee<A;++ee)C.push(P=G&&G[ee]!==void 0?E[m](ie[ee],G[ee]):E[m](ie[ee])),P.onerror=W;else for(var ee=0;ee<A;++ee)C.push(P=E[m](ie[ee])),P.onerror=W}var be=function(ae){var at=ae.target.result;C.forEach(function(te,Pt){return te.error!=null&&(M[Pt]=te.error)}),x({numFailures:D,failures:M,results:m==="delete"?g:C.map(function(te){return te.result}),lastResult:at})};P.onerror=function(ae){W(ae),be(ae)},P.onsuccess=be})}function f(v){var b=v.trans,m=v.values,g=v.query,w=v.reverse,y=v.unique;return new Promise(function(x,S){x=j(x);var E=g.index,T=g.range,R=b.objectStore(p),A=E.isPrimaryKey?R:R.index(E.name),P=w?y?"prevunique":"prev":y?"nextunique":"next",C=m||!("openKeyCursor"in A)?A.openCursor(i(T),P):A.openKeyCursor(i(T),P);C.onerror=re(S),C.onsuccess=j(function(M){var D=C.result;if(!D){x(null);return}D.___id=++xi,D.done=!1;var W=D.continue.bind(D),H=D.continuePrimaryKey;H&&(H=H.bind(D));var ie=D.advance.bind(D),G=function(){throw new Error("Cursor not started")},ee=function(){throw new Error("Cursor not stopped")};D.trans=b,D.stop=D.continue=D.continuePrimaryKey=D.advance=G,D.fail=j(S),D.next=function(){var be=this,ae=1;return this.start(function(){return ae--?be.continue():be.stop()}).then(function(){return be})},D.start=function(be){var ae=new Promise(function(te,Pt){te=j(te),C.onerror=re(Pt),D.fail=Pt,D.stop=function(la){D.stop=D.continue=D.continuePrimaryKey=D.advance=ee,te(la)}}),at=function(){if(C.result)try{be()}catch(te){D.fail(te)}else D.done=!0,D.start=function(){throw new Error("Cursor behind last entry")},D.stop()};return C.onsuccess=j(function(te){C.onsuccess=at,at()}),D.continue=W,D.continuePrimaryKey=H,D.advance=ie,at(),ae},x(D)},S)})}function d(v){return function(b){return new Promise(function(m,g){m=j(m);var w=b.trans,y=b.values,x=b.limit,S=b.query,E=x===1/0?void 0:x,T=S.index,R=S.range,A=w.objectStore(p),P=T.isPrimaryKey?A:A.index(T.name),C=i(R);if(x===0)return m({result:[]});if(v){var M=y?P.getAll(C,E):P.getAllKeys(C,E);M.onsuccess=function(ie){return m({result:ie.target.result})},M.onerror=re(g)}else{var D=0,W=y||!("openKeyCursor"in P)?P.openCursor(C):P.openKeyCursor(C),H=[];W.onsuccess=function(ie){var G=W.result;if(!G)return m({result:H});if(H.push(y?G.value:G.primaryKey),++D===x)return m({result:H});G.continue()},W.onerror=re(g)}})}}return{name:p,schema:l,mutate:_,getMany:function(v){var b=v.trans,m=v.keys;return new Promise(function(g,w){g=j(g);for(var y=b.objectStore(p),x=m.length,S=new Array(x),E=0,T=0,R,A=function(D){var W=D.target;(S[W._pos]=W.result)!=null,++T===E&&g(S)},P=re(w),C=0;C<x;++C){var M=m[C];M!=null&&(R=y.get(m[C]),R._pos=C,R.onsuccess=A,R.onerror=P,++E)}E===0&&g(S)})},get:function(v){var b=v.trans,m=v.key;return new Promise(function(g,w){g=j(g);var y=b.objectStore(p),x=y.get(m);x.onsuccess=function(S){return g(S.target.result)},x.onerror=re(w)})},query:d(s),openCursor:f,count:function(v){var b=v.query,m=v.trans,g=b.index,w=b.range;return new Promise(function(y,x){var S=m.objectStore(p),E=g.isPrimaryKey?S:S.index(g.name),T=i(w),R=T?E.count(T):E.count();R.onsuccess=j(function(A){return y(A.target.result)}),R.onerror=re(x)})}}}var u=r(e,n),o=u.schema,s=u.hasGetAll,c=o.tables.map(function(l){return a(l)}),h={};return c.forEach(function(l){return h[l.name]=l}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(l){var p=h[l];if(!p)throw new Error("Table '".concat(l,"' not found"));return h[l]},MIN_KEY:-1/0,MAX_KEY:tt(t),schema:o}}function Ki(e,t){return t.reduce(function(n,r){var i=r.create;return I(I({},n),i(n))},e)}function Si(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var a=Ki(Ei(t,i,r),e.dbcore);return{dbcore:a}}function xt(e,t){var n=t.db,r=Si(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(function(i){var a=i.name;e.core.schema.tables.some(function(u){return u.name===a})&&(i.core=e.core.table(a),e[a]instanceof e.Table&&(e[a].core=i.core))})}function Et(e,t,n,r){n.forEach(function(i){var a=r[i];t.forEach(function(u){var o=Pn(u,i);(!o||"value"in o&&o.value===void 0)&&(u===e.Transaction.prototype||u instanceof e.Transaction?le(u,i,{get:function(){return this.table(i)},set:function(s){Cn(this,i,{value:s,writable:!0,configurable:!0,enumerable:!0})}}):u[i]=new e.Table(i,a))})})}function ln(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function Ai(e,t){return e._cfg.version-t._cfg.version}function ki(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=sn("$meta",hr("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var u=a._reject.bind(a),o=k.transless||k;he(function(){if(k.trans=a,k.transless=o,t===0)U(i).forEach(function(s){hn(n,s,i[s].primKey,i[s].indexes)}),xt(e,n),K.follow(function(){return e.on.populate.fire(a)}).catch(u);else return xt(e,n),Oi(e,a,t).then(function(s){return Ti(e,s,a,n)}).catch(u)})}function Di(e,t){fr(e._dbSchema,t),t.db.version%10===0&&!t.objectStoreNames.contains("$meta")&&t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=St(e,e.idbdb,t);At(e,e._dbSchema,t);for(var r=fn(n,e._dbSchema),i=function(c){if(c.change.length||c.recreate)return console.warn("Unable to patch indexes of table ".concat(c.name," because it has changes on the type of index or primary key.")),{value:void 0};var h=t.objectStore(c.name);c.add.forEach(function(l){ne&&console.debug("Dexie upgrade patch: Creating missing index ".concat(c.name,".").concat(l.src)),Kt(h,l)})},a=0,u=r.change;a<u.length;a++){var o=u[a],s=i(o);if(typeof s=="object")return s.value}}function Oi(e,t,n){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(r){return r??n}):K.resolve(n)}function Ti(e,t,n,r){var i=[],a=e._versions,u=e._dbSchema=St(e,e.idbdb,r),o=a.filter(function(c){return c._cfg.version>=t});if(o.length===0)return K.resolve();o.forEach(function(c){i.push(function(){var h=u,l=c._cfg.dbschema;At(e,h,r),At(e,l,r),u=e._dbSchema=l;var p=fn(h,l);p.add.forEach(function(m){hn(r,m[0],m[1].primKey,m[1].indexes)}),p.change.forEach(function(m){if(m.recreate)throw new O.Upgrade("Not yet support for changing primary key");var g=r.objectStore(m.name);m.add.forEach(function(w){return Kt(g,w)}),m.change.forEach(function(w){g.deleteIndex(w.name),Kt(g,w)}),m.del.forEach(function(w){return g.deleteIndex(w)})});var _=c._cfg.contentUpgrade;if(_&&c._cfg.version>t){xt(e,r),n._memoizedTables={};var f=Mn(l);p.del.forEach(function(m){f[m]=h[m]}),ln(e,[e.Transaction.prototype]),Et(e,[e.Transaction.prototype],U(f),f),n.schema=f;var d=Nt(_);d&&Le();var v,b=K.follow(function(){if(v=_(n),v&&d){var m=de.bind(null,null);v.then(m,m)}});return v&&typeof v.then=="function"?K.resolve(v):b.then(function(){return v})}}),i.push(function(h){var l=c._cfg.dbschema;Ii(l,h),ln(e,[e.Transaction.prototype]),Et(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}),i.push(function(h){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===c._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(l){return l!=="$meta"})):h.objectStore("$meta").put(c._cfg.version,"version"))})});function s(){return i.length?K.resolve(i.shift()(n.idbtrans)).then(s):K.resolve()}return s().then(function(){fr(u,r)})}function fn(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],a=t[r];if(!i)n.add.push([r,a]);else{var u={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto)u.recreate=!0,n.change.push(u);else{var o=i.idxByName,s=a.idxByName,c=void 0;for(c in o)s[c]||u.del.push(c);for(c in s){var h=o[c],l=s[c];h?h.src!==l.src&&u.change.push(l):u.add.push(l)}(u.del.length>0||u.add.length>0||u.change.length>0)&&n.change.push(u)}}}return n}function hn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return Kt(i,a)}),i}function fr(e,t){U(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(ne&&console.debug("Dexie: Creating missing table",n),hn(t,n,e[n].primKey,e[n].indexes))})}function Ii(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function Kt(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function St(e,t,n){var r={},i=ut(t.objectStoreNames,0);return i.forEach(function(a){for(var u=n.objectStore(a),o=u.keyPath,s=on(cr(o),o||"",!0,!1,!!u.autoIncrement,o&&typeof o!="string",!0),c=[],h=0;h<u.indexNames.length;++h){var l=u.index(u.indexNames[h]);o=l.keyPath;var p=on(l.name,o,!!l.unique,!!l.multiEntry,!1,o&&typeof o!="string",!1);c.push(p)}r[a]=sn(a,s,c)}),r}function Ci(e,t,n){e.verno=t.version/10;var r=e._dbSchema=St(e,t,n);e._storeNames=ut(t.objectStoreNames,0),Et(e,[e._allTables],U(r),r)}function Pi(e,t){var n=St(e,e.idbdb,t),r=fn(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function At(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var a=r[i],u=n.objectStore(a);e._hasGetAll="getAll"in u;for(var o=0;o<u.indexNames.length;++o){var s=u.indexNames[o],c=u.index(s).keyPath,h=typeof c=="string"?c:"["+ut(c).join("+")+"]";if(t[a]){var l=t[a].idxByName[h];l&&(l.name=s,delete t[a].idxByName[h],t[a].idxByName[s]=l)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&L.WorkerGlobalScope&&L instanceof L.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function hr(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return on(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),V(i),n===0)})}var Ri=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){U(t).forEach(function(r){if(t[r]!==null){var i=hr(t[r]),a=i.shift();if(a.unique=!0,a.multi)throw new O.Schema("Primary key cannot be multi-valued");i.forEach(function(u){if(u.auto)throw new O.Schema("Only primary key can be marked as autoIncrement (++)");if(!u.keyPath)throw new O.Schema("Index must have a name and cannot be an empty string")}),n[r]=sn(r,a,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?J(this._cfg.storesSource,t):t;var r=n._versions,i={},a={};return r.forEach(function(u){J(i,u._cfg.storesSource),a=u._cfg.dbschema={},u._parseStoresSpec(i,a)}),n._dbSchema=a,ln(n,[n._allTables,n,n.Transaction.prototype]),Et(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],U(a),a),n._storeNames=U(a),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=zt(this._cfg.contentUpgrade||F,t),this},e}();function Bi(e){return Je(Ri.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function dn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new ce(mt,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function vn(e){return e&&typeof e.databases=="function"}function Mi(e){var t=e.indexedDB,n=e.IDBKeyRange;return vn(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==mt})}):dn(t,n).toCollection().primaryKeys()}function Fi(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!vn(n)&&t!==mt&&dn(n,r).put({name:t}).catch(F)}function ji(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!vn(n)&&t!==mt&&dn(n,r).delete(t).catch(F)}function pn(e){return he(function(){return k.letThrough=!0,e()})}function Ni(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}var yn;function mn(e){return!("from"in e)}var Q=function(e,t){if(this)J(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new Q;return e&&"d"in e&&J(n,e),n}};Pe(Q.prototype,(yn={add:function(e){return it(this,e),this},addKey:function(e){return rt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return rt(t,n,n)}),this},hasKey:function(e){var t=kt(this).next(e).value;return t&&B(t.from,e)<=0&&B(t.to,e)>=0}},yn[jt]=function(){return kt(this)},yn));function rt(e,t,n){var r=B(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(mn(e))return J(e,{from:t,to:n,d:1});var i=e.l,a=e.r;if(B(n,e.from)<0)return i?rt(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},vr(e);if(B(t,e.to)>0)return a?rt(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},vr(e);B(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),B(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var u=!e.r;i&&!e.l&&it(e,i),a&&u&&it(e,a)}}function it(e,t){function n(r,i){var a=i.from,u=i.to,o=i.l,s=i.r;rt(r,a,u),o&&n(r,o),s&&n(r,s)}mn(t)||n(e,t)}function dr(e,t){var n=kt(t),r=n.next();if(r.done)return!1;for(var i=r.value,a=kt(e),u=a.next(i.from),o=u.value;!r.done&&!u.done;){if(B(o.from,i.to)<=0&&B(o.to,i.from)>=0)return!0;B(i.from,o.from)<0?i=(r=n.next(o.from)).value:o=(u=a.next(i.from)).value}return!1}function kt(e){var t=mn(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&B(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||B(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function vr(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var a=i==="r"?"l":"r",u=I({},e),o=e[i];e.from=o.from,e.to=o.to,e[i]=o[i],u[i]=o[a],e[a]=u,u.d=pr(u)}e.d=pr(e)}function pr(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function Dt(e,t){return U(t).forEach(function(n){e[n]?it(e[n],t[n]):e[n]=Nn(t[n])}),e}function gn(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&dr(t[n],e[n])})}var Te={},bn={},wn=!1;function Ot(e,t){Dt(bn,e),wn||(wn=!0,setTimeout(function(){wn=!1;var n=bn;bn={},_n(n,!1)},0))}function _n(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(Te);r<i.length;r++){var a=i[r];yr(a,e,n,t)}else for(var u in e){var o=/^idb\:\/\/(.*)\/(.*)\//.exec(u);if(o){var s=o[1],c=o[2],a=Te["idb://".concat(s,"/").concat(c)];a&&yr(a,e,n,t)}}n.forEach(function(h){return h()})}function yr(e,t,n,r){for(var i=[],a=0,u=Object.entries(e.queries.query);a<u.length;a++){for(var o=u[a],s=o[0],c=o[1],h=[],l=0,p=c;l<p.length;l++){var _=p[l];gn(t,_.obsSet)?_.subscribers.forEach(function(b){return n.add(b)}):r&&h.push(_)}r&&i.push([s,h])}if(r)for(var f=0,d=i;f<d.length;f++){var v=d[f],s=v[0],h=v[1];e.queries.query[s]=h}}function Li(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Y(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(e.verno*10),a=!1;function u(){if(t.openCanceller!==r)throw new O.DatabaseClosed("db.open() was cancelled")}var o=t.dbReadyResolve,s=null,c=!1,h=function(){return new K(function(l,p){if(u(),!n)throw new O.MissingAPI;var _=e.name,f=t.autoSchema||!i?n.open(_):n.open(_,i);if(!f)throw new O.MissingAPI;f.onerror=re(p),f.onblocked=j(e._fireOnBlocked),f.onupgradeneeded=j(function(d){if(s=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=qe,s.abort(),f.result.close();var v=n.deleteDatabase(_);v.onsuccess=v.onerror=j(function(){p(new O.NoSuchDatabase("Database ".concat(_," doesnt exist")))})}else{s.onerror=re(p);var b=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;c=b<1,e.idbdb=f.result,a&&Di(e,s),ki(e,b/10,s,p)}},p),f.onsuccess=j(function(){s=null;var d=e.idbdb=f.result,v=ut(d.objectStoreNames);if(v.length>0)try{var b=d.transaction(wi(v),"readonly");if(t.autoSchema)Ci(e,d,b);else if(At(e,e._dbSchema,b),!Pi(e,b)&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),d.close(),i=d.version+1,a=!0,l(h());xt(e,b)}catch{}Ve.push(e),d.onversionchange=j(function(m){t.vcFired=!0,e.on("versionchange").fire(m)}),d.onclose=j(function(m){e.on("close").fire(m)}),c&&Fi(e._deps,_),l()},p)}).catch(function(l){switch(l?.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),h();break;case"VersionError":if(i>0)return i=0,h();break}return K.reject(l)})};return K.race([r,(typeof navigator>"u"?K.resolve():Ni()).then(h)]).then(function(){return u(),t.onReadyBeingFired=[],K.resolve(pn(function(){return e.on.ready.fire(e.vip)})).then(function l(){if(t.onReadyBeingFired.length>0){var p=t.onReadyBeingFired.reduce(zt,F);return t.onReadyBeingFired=[],K.resolve(pn(function(){return p(e.vip)})).then(l)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(l){t.dbOpenError=l;try{s&&s.abort()}catch{}return r===t.openCanceller&&e._close(),Y(l)}).finally(function(){t.openComplete=!0,o()}).then(function(){if(c){var l={};e.tables.forEach(function(p){p.schema.indexes.forEach(function(_){_.name&&(l["idb://".concat(e.name,"/").concat(p.name,"/").concat(_.name)]=new Q(-1/0,[[[]]]))}),l["idb://".concat(e.name,"/").concat(p.name,"/")]=l["idb://".concat(e.name,"/").concat(p.name,"/:dels")]=new Q(-1/0,[[[]]])}),ye(et).fire(l),_n(l,!0)}return e})}function xn(e){var t=function(u){return e.next(u)},n=function(u){return e.throw(u)},r=a(t),i=a(n);function a(u){return function(o){var s=u(o),c=s.value;return s.done?c:!c||typeof c.then!="function"?V(c)?Promise.all(c).then(r,i):r(c):c.then(r,i)}}return a(t)()}function Vi(e,t,n){var r=arguments.length;if(r<2)throw new O.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var a=Fn(i);return[e,a,n]}function mr(e,t,n,r,i){return K.resolve().then(function(){var a=k.transless||k,u=e._createTransaction(t,n,e._dbSchema,r);u.explicit=!0;var o={trans:u,transless:a};if(r)u.idbtrans=r.idbtrans;else try{u.create(),u.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(l){return l.name===Vt.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return mr(e,t,n,null,i)})):Y(l)}var s=Nt(i);s&&Le();var c,h=K.follow(function(){if(c=i.call(u,u),c)if(s){var l=de.bind(null,null);c.then(l,l)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=xn(c))},o);return(c&&typeof c.then=="function"?K.resolve(c).then(function(l){return u.active?l:Y(new O.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):h.then(function(){return c})).then(function(l){return r&&u._resolve(),u._completion.then(function(){return l})}).catch(function(l){return u._reject(l),Y(l)})})}function Tt(e,t,n){for(var r=V(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function zi(e){return I(I({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},a=[];function u(d,v,b){var m=nt(d),g=i[m]=i[m]||[],w=d==null?0:typeof d=="string"?1:d.length,y=v>0,x=I(I({},b),{name:y?"".concat(m,"(virtual-from:").concat(b.name,")"):b.name,lowLevelIndex:b,isVirtual:y,keyTail:v,keyLength:w,extractKey:cn(d),unique:!y&&b.unique});if(g.push(x),x.isPrimaryKey||a.push(x),w>1){var S=w===2?d[0]:d.slice(0,w-1);u(S,v+1,b)}return g.sort(function(E,T){return E.keyTail-T.keyTail}),x}var o=u(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[o];for(var s=0,c=r.indexes;s<c.length;s++){var h=c[s];u(h.keyPath,0,h)}function l(d){var v=i[nt(d)];return v&&v[0]}function p(d,v){return{type:d.type===1?2:d.type,lower:Tt(d.lower,d.lowerOpen?e.MAX_KEY:e.MIN_KEY,v),lowerOpen:!0,upper:Tt(d.upper,d.upperOpen?e.MIN_KEY:e.MAX_KEY,v),upperOpen:!0}}function _(d){var v=d.query.index;return v.isVirtual?I(I({},d),{query:{index:v.lowLevelIndex,range:p(d.query.range,v.keyTail)}}):d}var f=I(I({},n),{schema:I(I({},r),{primaryKey:o,indexes:a,getIndexByKeyPath:l}),count:function(d){return n.count(_(d))},query:function(d){return n.query(_(d))},openCursor:function(d){var v=d.query.index,b=v.keyTail,m=v.isVirtual,g=v.keyLength;if(!m)return n.openCursor(d);function w(y){function x(E){E!=null?y.continue(Tt(E,d.reverse?e.MAX_KEY:e.MIN_KEY,b)):d.unique?y.continue(y.key.slice(0,g).concat(d.reverse?e.MIN_KEY:e.MAX_KEY,b)):y.continue()}var S=Object.create(y,{continue:{value:x},continuePrimaryKey:{value:function(E,T){y.continuePrimaryKey(Tt(E,e.MAX_KEY,b),T)}},primaryKey:{get:function(){return y.primaryKey}},key:{get:function(){var E=y.key;return g===1?E[0]:E.slice(0,g)}},value:{get:function(){return y.value}}});return S}return n.openCursor(_(d)).then(function(y){return y&&w(y)})}});return f}})}var Wi={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:zi};function En(e,t,n,r){return n=n||{},r=r||"",U(e).forEach(function(i){if(!X(t,i))n[r+i]=void 0;else{var a=e[i],u=t[i];if(typeof a=="object"&&typeof u=="object"&&a&&u){var o=Ft(a),s=Ft(u);o!==s?n[r+i]=t[i]:o==="Object"?En(a,u,n,r+i+"."):a!==u&&(n[r+i]=t[i])}else a!==u&&(n[r+i]=t[i])}}),U(t).forEach(function(i){X(e,i)||(n[r+i]=t[i])}),n}function Kn(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Yi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return I(I({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=I(I({},n),{mutate:function(a){var u=k.trans,o=u.table(t).hook,s=o.deleting,c=o.creating,h=o.updating;switch(a.type){case"add":if(c.fire===F)break;return u._promise("readwrite",function(){return l(a)},!0);case"put":if(c.fire===F&&h.fire===F)break;return u._promise("readwrite",function(){return l(a)},!0);case"delete":if(s.fire===F)break;return u._promise("readwrite",function(){return l(a)},!0);case"deleteRange":if(s.fire===F)break;return u._promise("readwrite",function(){return p(a)},!0)}return n.mutate(a);function l(f){var d=k.trans,v=f.keys||Kn(r,f);if(!v)throw new Error("Keys missing");return f=f.type==="add"||f.type==="put"?I(I({},f),{keys:v}):I({},f),f.type!=="delete"&&(f.values=we([],f.values,!0)),f.keys&&(f.keys=we([],f.keys,!0)),Ui(n,f,v).then(function(b){var m=v.map(function(g,w){var y=b[w],x={onerror:null,onsuccess:null};if(f.type==="delete")s.fire.call(x,g,y,d);else if(f.type==="add"||y===void 0){var S=c.fire.call(x,g,f.values[w],d);g==null&&S!=null&&(g=S,f.keys[w]=g,r.outbound||Z(f.values[w],r.keyPath,g))}else{var E=En(y,f.values[w]),T=h.fire.call(x,E,g,y,d);if(T){var R=f.values[w];Object.keys(T).forEach(function(A){X(R,A)?R[A]=T[A]:Z(R,A,T[A])})}}return x});return n.mutate(f).then(function(g){for(var w=g.failures,y=g.results,x=g.numFailures,S=g.lastResult,E=0;E<v.length;++E){var T=y?y[E]:v[E],R=m[E];T==null?R.onerror&&R.onerror(w[E]):R.onsuccess&&R.onsuccess(f.type==="put"&&b[E]?f.values[E]:T)}return{failures:w,results:y,numFailures:x,lastResult:S}}).catch(function(g){return m.forEach(function(w){return w.onerror&&w.onerror(g)}),Promise.reject(g)})})}function p(f){return _(f.trans,f.range,1e4)}function _(f,d,v){return n.query({trans:f,values:!1,query:{index:r,range:d},limit:v}).then(function(b){var m=b.result;return l({type:"delete",keys:m,trans:f}).then(function(g){return g.numFailures>0?Promise.reject(g.failures[0]):m.length<v?{failures:[],numFailures:0,lastResult:void 0}:_(f,I(I({},d),{lower:m[m.length-1],lowerOpen:!0}),v)})})}}});return i}})}};function Ui(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function gr(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)B(t.keys[i],e[a])===0&&(r.push(n?_e(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch{return null}}var $i={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return I(I({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=gr(r.keys,r.trans._cache,r.cache==="clone");return i?K.resolve(i):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?_e(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}};function br(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function wr(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Qi={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new Q(e.MIN_KEY,e.MAX_KEY);return I(I({},e),{transaction:function(r,i,a){if(k.subscr&&i!=="readonly")throw new O.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(k.querier));return e.transaction(r,i,a)},table:function(r){var i=e.table(r),a=i.schema,u=a.primaryKey,o=a.indexes,s=u.extractKey,c=u.outbound,h=u.autoIncrement&&o.filter(function(f){return f.compound&&f.keyPath.includes(u.keyPath)}),l=I(I({},i),{mutate:function(f){var d,v,b=f.trans,m=f.mutatedParts||(f.mutatedParts={}),g=function(C){var M="idb://".concat(t,"/").concat(r,"/").concat(C);return m[M]||(m[M]=new Q)},w=g(""),y=g(":dels"),x=f.type,S=f.type==="deleteRange"?[f.range]:f.type==="delete"?[f.keys]:f.values.length<50?[Kn(u,f).filter(function(C){return C}),f.values]:[],E=S[0],T=S[1],R=f.trans._cache;if(V(E)){w.addKeys(E);var A=x==="delete"||E.length===T.length?gr(E,R):null;A||y.addKeys(E),(A||T)&&Hi(g,a,A,T)}else if(E){var P={from:(d=E.lower)!==null&&d!==void 0?d:e.MIN_KEY,to:(v=E.upper)!==null&&v!==void 0?v:e.MAX_KEY};y.add(P),w.add(P)}else w.add(n),y.add(n),a.indexes.forEach(function(C){return g(C.name).add(n)});return i.mutate(f).then(function(C){return E&&(f.type==="add"||f.type==="put")&&(w.addKeys(C.results),h&&h.forEach(function(M){for(var D=f.values.map(function(G){return M.extractKey(G)}),W=M.keyPath.findIndex(function(G){return G===u.keyPath}),H=0,ie=C.results.length;H<ie;++H)D[H][W]=C.results[H];g(M.name).addKeys(D)})),b.mutatedParts=Dt(b.mutatedParts||{},m),C})}}),p=function(f){var d,v,b=f.query,m=b.index,g=b.range;return[m,new Q((d=g.lower)!==null&&d!==void 0?d:e.MIN_KEY,(v=g.upper)!==null&&v!==void 0?v:e.MAX_KEY)]},_={get:function(f){return[u,new Q(f.key)]},getMany:function(f){return[u,new Q().addKeys(f.keys)]},count:p,query:p,openCursor:p};return U(_).forEach(function(f){l[f]=function(d){var v=k.subscr,b=!!v,m=br(k,i)&&wr(f,d),g=m?d.obsSet={}:v;if(b){var w=function(A){var P="idb://".concat(t,"/").concat(r,"/").concat(A);return g[P]||(g[P]=new Q)},y=w(""),x=w(":dels"),S=_[f](d),E=S[0],T=S[1];if(f==="query"&&E.isPrimaryKey&&!d.values?x.add(T):w(E.name||"").add(T),!E.isPrimaryKey)if(f==="count")x.add(n);else{var R=f==="query"&&c&&d.values&&i.query(I(I({},d),{values:!1}));return i[f].apply(this,arguments).then(function(A){if(f==="query"){if(c&&d.values)return R.then(function(D){var W=D.result;return y.addKeys(W),A});var P=d.values?A.result.map(s):A.result;d.values?y.addKeys(P):x.addKeys(P)}else if(f==="openCursor"){var C=A,M=d.values;return C&&Object.create(C,{key:{get:function(){return x.addKey(C.primaryKey),C.key}},primaryKey:{get:function(){var D=C.primaryKey;return x.addKey(D),D}},value:{get:function(){return M&&y.addKey(C.primaryKey),C.value}}})}return A})}}return i[f].apply(this,arguments)}}),l}})}};function Hi(e,t,n,r){function i(a){var u=e(a.name||"");function o(c){return c!=null?a.extractKey(c):null}var s=function(c){return a.multiEntry&&V(c)?c.forEach(function(h){return u.addKey(h)}):u.addKey(c)};(n||r).forEach(function(c,h){var l=n&&o(n[h]),p=r&&o(r[h]);B(l,p)!==0&&(l!=null&&s(l),p!=null&&s(p))})}t.indexes.forEach(i)}function _r(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var r=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(n.numFailures===r)return null;var i=I({},t);return V(i.keys)&&(i.keys=i.keys.filter(function(a,u){return!(u in n.failures)})),"values"in i&&V(i.values)&&(i.values=i.values.filter(function(a,u){return!(u in n.failures)})),i}function Xi(e,t){return t.lower===void 0?!0:t.lowerOpen?B(e,t.lower)>0:B(e,t.lower)>=0}function Gi(e,t){return t.upper===void 0?!0:t.upperOpen?B(e,t.upper)<0:B(e,t.upper)<=0}function Sn(e,t){return Xi(e,t)&&Gi(e,t)}function xr(e,t,n,r,i,a){if(!n||n.length===0)return e;var u=t.query.index,o=u.multiEntry,s=t.query.range,c=r.schema.primaryKey,h=c.extractKey,l=u.extractKey,p=(u.lowLevelIndex||u).extractKey,_=n.reduce(function(f,d){var v=f,b=[];if(d.type==="add"||d.type==="put")for(var m=new Q,g=d.values.length-1;g>=0;--g){var w=d.values[g],y=h(w);if(!m.hasKey(y)){var x=l(w);(o&&V(x)?x.some(function(A){return Sn(A,s)}):Sn(x,s))&&(m.addKey(y),b.push(w))}}switch(d.type){case"add":{var S=new Q().addKeys(t.values?f.map(function(A){return h(A)}):f);v=f.concat(t.values?b.filter(function(A){var P=h(A);return S.hasKey(P)?!1:(S.addKey(P),!0)}):b.map(function(A){return h(A)}).filter(function(A){return S.hasKey(A)?!1:(S.addKey(A),!0)}));break}case"put":{var E=new Q().addKeys(d.values.map(function(A){return h(A)}));v=f.filter(function(A){return!E.hasKey(t.values?h(A):A)}).concat(t.values?b:b.map(function(A){return h(A)}));break}case"delete":var T=new Q().addKeys(d.keys);v=f.filter(function(A){return!T.hasKey(t.values?h(A):A)});break;case"deleteRange":var R=d.range;v=f.filter(function(A){return!Sn(h(A),R)});break}return v},e);return _===e?e:(_.sort(function(f,d){return B(p(f),p(d))||B(h(f),h(d))}),t.limit&&t.limit<1/0&&(_.length>t.limit?_.length=t.limit:e.length===t.limit&&_.length<t.limit&&(i.dirty=!0)),a?Object.freeze(_):_)}function Er(e,t){return B(e.lower,t.lower)===0&&B(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Ji(e,t,n,r){if(e===void 0)return t!==void 0?-1:0;if(t===void 0)return 1;var i=B(e,t);if(i===0){if(n&&r)return 0;if(n)return 1;if(r)return-1}return i}function Zi(e,t,n,r){if(e===void 0)return t!==void 0?1:0;if(t===void 0)return-1;var i=B(e,t);if(i===0){if(n&&r)return 0;if(n)return-1;if(r)return 1}return i}function qi(e,t){return Ji(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&Zi(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function ea(e,t,n,r){var i=Te["idb://".concat(e,"/").concat(t)];if(!i)return[];var a=i.queries[n];if(!a)return[null,!1,i,null];var u=r.query?r.query.index.name:null,o=a[u||""];if(!o)return[null,!1,i,null];switch(n){case"query":var s=o.find(function(l){return l.req.limit===r.limit&&l.req.values===r.values&&Er(l.req.query.range,r.query.range)});if(s)return[s,!0,i,o];var c=o.find(function(l){var p="limit"in l.req?l.req.limit:1/0;return p>=r.limit&&(r.values?l.req.values:!0)&&qi(l.req.query.range,r.query.range)});return[c,!1,i,o];case"count":var h=o.find(function(l){return Er(l.req.query.range,r.query.range)});return[h,!!h,i,o]}}function ta(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){e.subscribers.delete(n),e.subscribers.size===0&&na(e,t)})}function na(e,t){setTimeout(function(){e.subscribers.size===0&&xe(t,e)},3e3)}var ra={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name,n=I(I({},e),{transaction:function(r,i,a){var u=e.transaction(r,i,a);if(i==="readwrite"){var o=new AbortController,s=o.signal,c=function(h){return function(){if(o.abort(),i==="readwrite"){for(var l=new Set,p=0,_=r;p<_.length;p++){var f=_[p],d=Te["idb://".concat(t,"/").concat(f)];if(d){var v=e.table(f),b=d.optimisticOps.filter(function(M){return M.trans===u});if(u._explicit&&h&&u.mutatedParts)for(var m=0,g=Object.values(d.queries.query);m<g.length;m++)for(var w=g[m],y=0,x=w.slice();y<x.length;y++){var S=x[y];gn(S.obsSet,u.mutatedParts)&&(xe(w,S),S.subscribers.forEach(function(M){return l.add(M)}))}else if(b.length>0){d.optimisticOps=d.optimisticOps.filter(function(M){return M.trans!==u});for(var E=0,T=Object.values(d.queries.query);E<T.length;E++)for(var w=T[E],R=0,A=w.slice();R<A.length;R++){var S=A[R];if(S.res!=null&&u.mutatedParts)if(h&&!S.dirty){var P=Object.isFrozen(S.res),C=xr(S.res,S.req,b,v,S,P);S.dirty?(xe(w,S),S.subscribers.forEach(function(W){return l.add(W)})):C!==S.res&&(S.res=C,S.promise=K.resolve({result:C}))}else S.dirty&&xe(w,S),S.subscribers.forEach(function(W){return l.add(W)})}}}}l.forEach(function(M){return M()})}}};u.addEventListener("abort",c(!1),{signal:s}),u.addEventListener("error",c(!1),{signal:s}),u.addEventListener("complete",c(!0),{signal:s})}return u},table:function(r){var i=e.table(r),a=i.schema.primaryKey,u=I(I({},i),{mutate:function(o){var s=k.trans;if(a.outbound||s.db._options.cache==="disabled"||s.explicit||s.idbtrans.mode!=="readwrite")return i.mutate(o);var c=Te["idb://".concat(t,"/").concat(r)];if(!c)return i.mutate(o);var h=i.mutate(o);return(o.type==="add"||o.type==="put")&&(o.values.length>=50||Kn(a,o).some(function(l){return l==null}))?h.then(function(l){var p=I(I({},o),{values:o.values.map(function(f,d){var v;if(l.failures[d])return f;var b=!((v=a.keyPath)===null||v===void 0)&&v.includes(".")?_e(f):I({},f);return Z(b,a.keyPath,l.results[d]),b})}),_=_r(c,p,l);c.optimisticOps.push(_),queueMicrotask(function(){return o.mutatedParts&&Ot(o.mutatedParts)})}):(c.optimisticOps.push(o),o.mutatedParts&&Ot(o.mutatedParts),h.then(function(l){if(l.numFailures>0){xe(c.optimisticOps,o);var p=_r(c,o,l);p&&c.optimisticOps.push(p),o.mutatedParts&&Ot(o.mutatedParts)}}),h.catch(function(){xe(c.optimisticOps,o),o.mutatedParts&&Ot(o.mutatedParts)})),h},query:function(o){var s;if(!br(k,i)||!wr("query",o))return i.query(o);var c=((s=k.trans)===null||s===void 0?void 0:s.db._options.cache)==="immutable",h=k,l=h.requery,p=h.signal,_=ea(t,r,"query",o),f=_[0],d=_[1],v=_[2],b=_[3];if(f&&d)f.obsSet=o.obsSet;else{var m=i.query(o).then(function(g){var w=g.result;if(f&&(f.res=w),c){for(var y=0,x=w.length;y<x;++y)Object.freeze(w[y]);Object.freeze(w)}else g.result=_e(w);return g}).catch(function(g){return b&&f&&xe(b,f),Promise.reject(g)});f={obsSet:o.obsSet,promise:m,subscribers:new Set,type:"query",req:o,dirty:!1},b?b.push(f):(b=[f],v||(v=Te["idb://".concat(t,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),v.queries.query[o.query.index.name||""]=b)}return ta(f,b,l,p),f.promise.then(function(g){return{result:xr(g.result,o,v?.optimisticOps,i,f,c)}})}});return u}});return n}};function It(e,t){return new Proxy(e,{get:function(n,r,i){return r==="db"?t:Reflect.get(n,r,i)}})}var ce=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=I({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:F,dbReadyPromise:null,cancelOpen:F,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};u.dbReadyPromise=new K(function(s){u.dbReadyResolve=s}),u.openCanceller=new K(function(s,c){u.cancelOpen=c}),this._state=u,this.name=t,this.on=Ge(this,"populate","blocked","versionchange","close",{ready:[zt,F]}),this.on.ready.subscribe=Rn(this.on.ready.subscribe,function(s){return function(c,h){e.vip(function(){var l=r._state;if(l.openComplete)l.dbOpenError||K.resolve().then(c),h&&s(c);else if(l.onReadyBeingFired)l.onReadyBeingFired.push(c),h&&s(c);else{s(c);var p=r;h||s(function _(){p.on.ready.unsubscribe(c),p.on.ready.unsubscribe(_)})}})}}),this.Collection=fi(this),this.Table=si(this),this.Transaction=bi(this),this.Version=Bi(this),this.WhereClause=mi(this),this.on("versionchange",function(s){s.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})}),this.on("blocked",function(s){!s.newVersion||s.newVersion<s.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(s.oldVersion/10))}),this._maxKey=tt(n.IDBKeyRange),this._createTransaction=function(s,c,h,l){return new r.Transaction(s,c,h,r._options.chromeTransactionDurability,l)},this._fireOnBlocked=function(s){r.on("blocked").fire(s),Ve.filter(function(c){return c.name===r.name&&c!==r&&!c._state.vcFired}).map(function(c){return c.on("versionchange").fire(s)})},this.use($i),this.use(ra),this.use(Qi),this.use(Wi),this.use(Yi);var o=new Proxy(this,{get:function(s,c,h){if(c==="_vip")return!0;if(c==="table")return function(p){return It(r.table(p),o)};var l=Reflect.get(s,c,h);return l instanceof ir?It(l,o):c==="tables"?l.map(function(p){return It(p,o)}):c==="_createTransaction"?function(){var p=l.apply(this,arguments);return It(p,o)}:l}});this.vip=o,a.forEach(function(s){return s(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new O.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new O.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(Ai),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||k.letThrough||this._vip)?t():new K(function(r,i){if(n._state.openComplete)return i(new O.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen){i(new O.DatabaseClosed);return}n.open().catch(F)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,a=t.name;a&&this.unuse({stack:n,name:a});var u=this._middlewares[n]||(this._middlewares[n]=[]);return u.push({stack:n,create:r,level:i??10,name:a}),u.sort(function(o,s){return o.level-s.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(a){return i?a.create!==i:r?a.name!==r:!1})),this},e.prototype.open=function(){var t=this;return ke(fe,function(){return Li(t)})},e.prototype._close=function(){var t=this._state,n=Ve.indexOf(this);if(n>=0&&Ve.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new K(function(r){t.dbReadyResolve=r}),t.openCanceller=new K(function(r,i){t.cancelOpen=i}))},e.prototype.close=function(t){var n=t===void 0?{disableAutoOpen:!0}:t,r=n.disableAutoOpen,i=this._state;r?(i.isBeingOpened&&i.cancelOpen(new O.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new O.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},e.prototype.delete=function(t){var n=this;t===void 0&&(t={disableAutoOpen:!0});var r=arguments.length>0&&typeof arguments[0]!="object",i=this._state;return new K(function(a,u){var o=function(){n.close(t);var s=n._deps.indexedDB.deleteDatabase(n.name);s.onsuccess=j(function(){ji(n._deps,n.name),a()}),s.onerror=re(u),s.onblocked=n._fireOnBlocked};if(r)throw new O.InvalidArgument("Invalid closeOptions argument to db.delete()");i.isBeingOpened?i.dbReadyPromise.then(o):o()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return U(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=Vi.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,a=k.trans;(!a||a.db!==this||t.indexOf("!")!==-1)&&(a=null);var u=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var o,s;try{if(s=n.map(function(h){var l=h instanceof i.Table?h.name:h;if(typeof l!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return l}),t=="r"||t===en)o=en;else if(t=="rw"||t==tn)o=tn;else throw new O.InvalidArgument("Invalid transaction mode: "+t);if(a){if(a.mode===en&&o===tn)if(u)a=null;else throw new O.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&s.forEach(function(h){if(a&&a.storeNames.indexOf(h)===-1)if(u)a=null;else throw new O.SubTransaction("Table "+h+" not included in parent transaction.")}),u&&a&&!a.active&&(a=null)}}catch(h){return a?a._promise(null,function(l,p){p(h)}):Y(h)}var c=mr.bind(null,this,o,s,a,r);return a?a._promise(o,c,"lock"):k.trans?ke(k.transless,function(){return i._whenReady(c)}):this._whenReady(c)},e.prototype.table=function(t){if(!X(this._allTables,t))throw new O.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},e}(),ia=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",aa=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[ia]=function(){return this},e}(),Ct;try{Ct={indexedDB:L.indexedDB||L.mozIndexedDB||L.webkitIndexedDB||L.msIndexedDB,IDBKeyRange:L.IDBKeyRange||L.webkitIDBKeyRange}}catch{Ct={indexedDB:null,IDBKeyRange:null}}function Kr(e){var t=!1,n,r=new aa(function(i){var a=Nt(e);function u(b){var m=je();try{a&&Le();var g=he(e,b);return a&&(g=g.finally(de)),g}finally{m&&Ne()}}var o=!1,s,c={},h={},l={get closed(){return o},unsubscribe:function(){o||(o=!0,s&&s.abort(),p&&ye.storagemutated.unsubscribe(d))}};i.start&&i.start(l);var p=!1,_=function(){return Jt(v)};function f(){return gn(h,c)}var d=function(b){Dt(c,b),f()&&_()},v=function(){if(!(o||!Ct.indexedDB)){c={};var b={};s&&s.abort(),s=new AbortController;var m={subscr:b,signal:s.signal,requery:_,querier:e,trans:null},g=u(m);Promise.resolve(g).then(function(w){t=!0,n=w,!(o||m.signal.aborted)&&(c={},h=b,!Mr(h)&&!p&&(ye(et,d),p=!0),Jt(function(){return!o&&i.next&&i.next(w)}))},function(w){t=!1,["DatabaseClosedError","AbortError"].includes(w?.name)||o||Jt(function(){o||i.error&&i.error(w)})})}};return setTimeout(_,0),l});return r.hasValue=function(){return t},r.getValue=function(){return n},r}var Ie=ce;Pe(Ie,I(I({},st),{delete:function(e){var t=new Ie(e,{addons:[]});return t.delete()},exists:function(e){return new Ie(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return Mi(Ie.dependencies).then(e)}catch{return Y(new O.MissingAPI)}},defineClass:function(){function e(t){J(this,t)}return e},ignoreTransaction:function(e){return k.trans?ke(k.transless,e):e()},vip:pn,async:function(e){return function(){try{var t=xn(e.apply(this,arguments));return!t||typeof t.then!="function"?K.resolve(t):t}catch(n){return Y(n)}}},spawn:function(e,t,n){try{var r=xn(e.apply(n,t||[]));return!r||typeof r.then!="function"?K.resolve(r):r}catch(i){return Y(i)}},currentTransaction:{get:function(){return k.trans||null}},waitFor:function(e,t){var n=K.resolve(typeof e=="function"?Ie.ignoreTransaction(e):e).timeout(t||6e4);return k.trans?k.trans.waitFor(n):n},Promise:K,debug:{get:function(){return ne},set:function(e){Wn(e)}},derive:Re,extend:J,props:Pe,override:Rn,Events:Ge,on:ye,liveQuery:Kr,extendObservabilitySet:Dt,getByKeyPath:ue,setByKeyPath:Z,delByKeyPath:Pr,shallowClone:Mn,deepClone:_e,getObjectDiff:En,cmp:B,asap:Bn,minKey:qt,addons:[],connections:Ve,errnames:Vt,dependencies:Ct,cache:Te,semVer:Zn,version:Zn.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})})),Ie.maxKey=tt(Ie.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ye(et,function(e){if(!me){var t;t=new CustomEvent(un,{detail:e}),me=!0,dispatchEvent(t),me=!1}}),addEventListener(un,function(e){var t=e.detail;me||An(t)}));function An(e){var t=me;try{me=!0,ye.storagemutated.fire(e),_n(e,!0)}finally{me=t}}var me=!1,ge,kn=function(){};typeof BroadcastChannel<"u"&&(kn=function(){ge=new BroadcastChannel(un),ge.onmessage=function(e){return e.data&&An(e.data)}},kn(),typeof ge.unref=="function"&&ge.unref(),ye(et,function(e){me||ge.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!ce.disableBfCache&&e.persisted){ne&&console.debug("Dexie: handling persisted pagehide"),ge?.close();for(var t=0,n=Ve;t<n.length;t++){var r=n[t];r.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(e){!ce.disableBfCache&&e.persisted&&(ne&&console.debug("Dexie: handling persisted pageshow"),kn(),An({all:new Q(-1/0,[[]])}))}));function ua(e){return new Ze({add:e})}function oa(e){return new Ze({remove:e})}function sa(e,t){return new Ze({replacePrefix:[e,t]})}K.rejectionMapper=zr,Wn(ne);var ca=Object.freeze({__proto__:null,Dexie:ce,liveQuery:Kr,Entity:tr,cmp:B,PropModification:Ze,replacePrefix:sa,add:ua,remove:oa,default:ce,RangeSet:Q,mergeRanges:it,rangesOverlap:dr});return I(ce,ca,{default:ce}),ce})});var Rt=ga(Ar(),1),kr=Symbol.for("Dexie"),Bt=globalThis[kr]||(globalThis[kr]=Rt.default);if(Rt.default.semVer!==Bt.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Rt.default.semVer} and ${Bt.semVer}`);var{liveQuery:_a,mergeRanges:xa,rangesOverlap:Ea,RangeSet:Ka,cmp:Sa,Entity:Aa,PropModification:ka,replacePrefix:Da,add:Oa,remove:Ta}=Bt;var Dr=Bt;var ba={version:1,stores:{projects:"++projectId, projectName, deleted, deletedAt, [deleted+deletedAt], lastModified",primitiveColors:"++primitiveId, projectId, primitiveName, orderIndex",semanticColors:"++semanticId, projectId, semanticName, orderIndex",fonts:"++fontId, projectId, fontName, orderIndex",translations:"++translationId, projectId, translationData"}},Tn=ba;var In=class z{static _sharedDB=null;static get sharedDB(){if(!this._sharedDB){let N=new Dr("ThMLT_DB");N.version(Tn.version).stores(Tn.stores),N.open().catch(I=>console.error("Failed to open DB:",I)),this._sharedDB=N}return this._sharedDB}constructor(){this.db=z.sharedDB}},Ba=In;export{Ba as default};
/*! Bundled license information:

dexie/dist/dexie.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
//# sourceMappingURL=DatabaseModelForWorker.js.map
